# CFI Handbook - Environment Variables Configuration
# Development and Production environment setup

# ====================================
# AUTHENTICATION (Clerk)
# ====================================
# Public key for client-side authentication (OK to commit for development)
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_your_publishable_key_here

# ====================================
# DATABASE CONFIGURATION
# ====================================
# Local development database (using PGLite)
DATABASE_URL=postgresql://postgres:postgres@127.0.0.1:5433/postgres
DATABASE_SSL=false

# Production database configuration (Railway PostgreSQL)
# In Railway, this will be: DATABASE_URL=${{Postgres.DATABASE_URL}}
# DATABASE_SSL=true
# DATABASE_CONNECTION_POOL_SIZE=15
# DATABASE_CONNECTION_TIMEOUT=30000
# DATABASE_IDLE_TIMEOUT=600000
# DATABASE_MAX_LIFETIME=3600000

# ====================================
# ANALYTICS & MONITORING (Public)
# ====================================
# PostHog Analytics (Optional)
NEXT_PUBLIC_POSTHOG_KEY=your_posthog_key_here
NEXT_PUBLIC_POSTHOG_HOST=https://us.i.posthog.com

# Sentry Error Monitoring (Production)
# NEXT_PUBLIC_SENTRY_DSN=https://your-dsn@o4507.ingest.us.sentry.io/1234567
# NEXT_PUBLIC_SENTRY_DISABLED=false
# NEXT_PUBLIC_SENTRY_RELEASE=${{RAILWAY_GIT_COMMIT_SHA}}

# ====================================
# APPLICATION CONFIGURATION
# ====================================
# Next.js Configuration
NEXT_TELEMETRY_DISABLED=1
NODE_ENV=development

# Application URL (automatically set in Railway)
# NEXT_PUBLIC_APP_URL=http://localhost:3000
# In Railway: NEXT_PUBLIC_APP_URL=${{RAILWAY_STATIC_URL}}

# ====================================
# RAILWAY-SPECIFIC VARIABLES
# ====================================
# These are automatically provided by Railway in production:
# RAILWAY_STATIC_URL - Your application URL
# RAILWAY_GIT_COMMIT_SHA - Git commit hash for releases
# RAILWAY_ENVIRONMENT - Environment name (production, staging)
# RAILWAY_SERVICE_NAME - Service identifier
# RAILWAY_DEPLOYMENT_ID - Unique deployment ID
# PORT - Application port (automatically assigned)

# ====================================
# PRODUCTION CONFIGURATION
# ====================================
# These should be set in Railway dashboard for production:

# Deployment settings
# DEPLOYMENT_ENVIRONMENT=production
# RAILWAY_ENVIRONMENT=production
# ZERO_DOWNTIME_ENABLED=true
# GRACEFUL_SHUTDOWN_TIMEOUT=30000

# Health check configuration
# HEALTH_CHECK_TIMEOUT=30000
# READINESS_CHECK_TIMEOUT=30000

# Build optimization
# BUILD_TIMEOUT=1200
# ESLINT_NO_DEV_ERRORS=true
# NODE_OPTIONS=--max-old-space-size=2048 --optimize-for-size

# Logging
# LOG_LEVEL=info

######## [SENSITIVE DATA - Store in .env.local or Railway Variables] ########
# NEVER commit these to git! Add to .env.local (development) or Railway dashboard (production)

# Clerk Authentication Secret
# CLERK_SECRET_KEY=sk_live_your_secret_key_here

# Arcjet Security (Optional)
# ARCJET_KEY=ajkey_your_secret_key_here

# Sentry Authentication Token (for releases)
# SENTRY_AUTH_TOKEN=your_sentry_auth_token
# SENTRY_ENVIRONMENT=production

# Better Stack Logging (Optional)
# BETTER_STACK_SOURCE_TOKEN=your_better_stack_token

######## [RAILWAY DEPLOYMENT CHECKLIST] ########
# Before deploying to Railway, ensure you have:
# 1. ✅ Added PostgreSQL service to your Railway project
# 2. ✅ Set CLERK_SECRET_KEY in Railway variables
# 3. ✅ Set NEXT_PUBLIC_SENTRY_DSN in Railway variables
# 4. ✅ Configured custom domain (if applicable)
# 5. ✅ Updated NEXT_PUBLIC_APP_URL if using custom domain
# 6. ✅ Verified all health check endpoints are working
# 7. ✅ Tested authentication flow in production
# 8. ✅ Validated database migrations run successfully

######## [DEVELOPMENT SETUP] ########
# For local development:
# 1. Copy this file to .env.local
# 2. Update NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY with your Clerk key
# 3. Add CLERK_SECRET_KEY to .env.local
# 4. Start local PGLite database: npm run db-server:file
# 5. Run development server: npm run dev